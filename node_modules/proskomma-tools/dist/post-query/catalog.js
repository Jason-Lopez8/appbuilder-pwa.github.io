"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var parseChapterVerseMapInDocSets = _ref => {
  var {
    docSets: _docSets
  } = _ref;
  var docSets = (_docSets === null || _docSets === void 0 ? void 0 : _docSets.length) > 0 ? JSON.parse(JSON.stringify(_docSets)) : [];
  docSets === null || docSets === void 0 ? void 0 : docSets.forEach(docSet => {
    var _docSet$selectors, _docSet$tagsKv;

    if (docSet !== null && docSet !== void 0 && (_docSet$selectors = docSet.selectors) !== null && _docSet$selectors !== void 0 && _docSet$selectors.forEach) {
      var selectors = {};
      docSet.selectors.forEach(_ref2 => {
        var {
          key,
          value
        } = _ref2;
        selectors[key] = value;
      });
      docSet.selectors = selectors;
    }

    if (docSet !== null && docSet !== void 0 && (_docSet$tagsKv = docSet.tagsKv) !== null && _docSet$tagsKv !== void 0 && _docSet$tagsKv.forEach) {
      var tags = {};
      docSet.tagsKv.forEach(_ref3 => {
        var {
          key,
          value
        } = _ref3;
        tags[key] = value;
      });
      delete docSet.tagsKv;
      docSet.tags = tags;
    }

    docSet.documents.forEach(document => {
      if (document !== null && document !== void 0 && document.cvNumbers) {
        var _document$cvNumbers;

        var chaptersVersesObject = {};
        document === null || document === void 0 ? void 0 : (_document$cvNumbers = document.cvNumbers) === null || _document$cvNumbers === void 0 ? void 0 : _document$cvNumbers.forEach(_ref4 => {
          var {
            chapter,
            verses
          } = _ref4;
          var versesObject = {};
          verses.forEach(_ref5 => {
            var {
              number,
              range
            } = _ref5;
            versesObject[number] = range;
          });
          chaptersVersesObject[chapter] = versesObject;
        });
        delete document.cvNumbers;
        document.versesByChapters = chaptersVersesObject;
      }
    });
  });
  return docSets;
};

var _default = parseChapterVerseMapInDocSets;
exports.default = _default;