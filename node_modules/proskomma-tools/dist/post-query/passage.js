"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.parseScopeLabels = exports.parsePassageResponse = void 0;

var parsePassageResponse = _ref => {
  var {
    bookCode,
    data
  } = _ref;
  var passages = [];
  data.documents.forEach(doc => {
    doc.cv.forEach(_ref2 => {
      var {
        scopeLabels,
        text
      } = _ref2;
      var {
        chapter,
        verse
      } = parseScopeLabels({
        scopeLabels
      });
      var verseReference = verse ? ":".concat(verse) : '';
      var passage = {
        docSetId: doc.docSetId,
        reference: "".concat(bookCode, " ").concat(chapter).concat(verseReference),
        text
      };
      passages = [...passages, passage];
    });
  });
  return passages;
};

exports.parsePassageResponse = parsePassageResponse;

var parseScopeLabels = _ref3 => {
  var {
    scopeLabels
  } = _ref3;
  var chapter = scopeLabels === null || scopeLabels === void 0 ? void 0 : scopeLabels.filter(sl => sl.startsWith('chapter'))[0].split('/')[1];
  var verses = scopeLabels === null || scopeLabels === void 0 ? void 0 : scopeLabels.filter(sl => sl.startsWith('verse')).map(v => v.split('/')[1]);
  var verse = verses[verses.length - 1];
  return {
    chapter,
    verse
  };
};

exports.parseScopeLabels = parseScopeLabels;